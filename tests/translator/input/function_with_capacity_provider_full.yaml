AWSTemplateFormatVersion: '2010-09-09'
Transform: AWS::Serverless-2016-10-31
Description: Function with full capacity provider configuration test

Resources:
  FullLMIFunction:
    Type: AWS::Serverless::Function
    Properties:
      FunctionName: LMIFunctionWithFullConfig
      CodeUri: s3://sam-demo-bucket/hello.zip
      Handler: hello.handler
      Runtime: python3.12
      Description: Lambda function with full capacity provider configuration
      MemorySize: 512
      Timeout: 30
      Environment:
        Variables:
          ENVIRONMENT: production
      CapacityProviderConfig:
        Arn: arn:aws:lambda:us-east-1:123456789012:capacity-provider:test-capacity-provider
        PerExecutionEnvironmentMaxConcurrency: 100
        ExecutionEnvironmentMemoryGiBPerVCpu: 4.0
      FunctionScalingConfig:
        MinExecutionEnvironments: 5
        MaxExecutionEnvironments: 100
      PublishToLatestPublished: false
