Parameters:
  iamRoleArn:
    Type: String
    Description: The ARN of an IAM role to use as this function's execution role.
      If a role isn't specified, one is created for you with a logical ID of <function-logical-id>Role.

Conditions:
  RoleExists: !Not [!Equals ['', !Ref iamRoleArn]]

Resources:
  MinimalFunction:
    Type: AWS::Serverless::Function
    Properties:
      CodeUri: s3://sam-demo-bucket/hello.zip
      Handler: hello.handler
      Runtime: python3.10
      Role: !If
      - RoleExists
      - !Ref "iamRoleArn"
      - !Ref "AWS::NoValue"
